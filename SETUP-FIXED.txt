## ğŸ”§ FIXED: Setup & Deployment Scripts

### What Was Wrong:
1. âŒ Scripts weren't reading .env file properly
2. âŒ No prompts for Runloop/Oracle setup
3. âŒ Missing package-lock.json causing npm audit error
4. âŒ Sed commands incompatible with macOS

### What's Fixed:
1. âœ… Scripts now properly source .env file
2. âœ… Full interactive prompts for all services
3. âœ… Generates package-lock.json automatically
4. âœ… macOS-compatible sed commands

### What Setup Now Does:

```
1. Checks existing .env configuration
2. Prompts for MISSING API keys only
3. Asks: "Deploy voice services to Runloop? (y/n)"
   - If yes: Deploys Whisper + Piper automatically
4. Asks: "Enable self-upgrade? (y/n)"
   - If yes: Configures GitHub + Cloudflare API
5. Creates Cloudflare KV namespaces
6. Sets all secrets in Cloudflare
7. Ready to deploy!
```

### Your Current Status:

âœ… API keys from listlift-ai are in .env:
- Anthropic (Claude)
- Groq (FREE Llama)
- Gemini (FREE Google)
- Runloop API key

### Next Steps:

**Option 1: Full Interactive Setup (Recommended)**
```bash
cd /Users/jonan/src/claudebox/omni-agent
./setup.sh
```

This will:
- Detect your existing keys âœ“
- Skip prompting for them
- Ask about Runloop voice services
- Ask about self-upgrade capability
- Configure everything

**Option 2: Quick Deploy (Skip Runloop)**
```bash
cd /Users/jonan/src/claudebox/omni-agent
./deploy.sh
```

This will:
- Run setup automatically if needed
- Deploy worker + frontend
- Return URLs immediately

### Setup Flow Example:

```
$ ./setup.sh

âš™ï¸  OMNI-AGENT SETUP
===================

ğŸ” Checking existing configuration...

âœ“ Shared secret configured
âœ“ Anthropic API key configured
âœ“ Groq API key configured
âœ“ Gemini API key configured

ğŸ¤ Voice Services (Runloop)
===========================
Deploy voice services to Runloop? (y/n): y

âœ“ Runloop API Key already configured

ğŸš€ Deploying to Runloop...
This will set up Whisper (speech-to-text) and Piper (text-to-speech)
[Deploys Whisper + Piper automatically]
âœ“ Runloop deployed: https://devbox-123.runloop.dev:8000

ğŸ”§ Self-Upgrade Capability (Optional)
======================================
This allows you to modify the system using voice commands!
Enable self-upgrade? (y/n): y

ğŸ“– Opening https://github.com/settings/tokens/new...
Enter your GitHub Personal Access Token: [paste token]
Enter GitHub repo (format: username/repo): yourname/omni-agent

âœ“ Self-upgrade enabled!
   Say 'upgrade mode' then describe changes

ğŸ“¦ Creating Cloudflare KV Namespaces...
[Creates namespaces]

ğŸ” Setting Cloudflare Secrets...
[Sets all secrets]

âœ… Setup complete!

Next: Run ./deploy.sh to deploy everything
```

### What You'll Be Asked:

1. **Runloop voice services?**
   - Yes â†’ Deploys Whisper + Piper (FREE or your Runloop tier)
   - No â†’ Uses browser Speech API only (still works!)

2. **Self-upgrade capability?**
   - Yes â†’ Can modify system with voice commands
   - No â†’ Can add later by running ./setup.sh again

### Recommendation:

**Start with Runloop:**
```bash
./setup.sh
# Answer 'y' to Runloop
# Answer 'y' to self-upgrade (optional but cool!)
```

Then:
```bash
./deploy.sh
```

You'll have:
- âœ… Multi-provider LLM rotation
- âœ… Voice input/output (Whisper + Piper)
- âœ… Self-upgrading capability
- âœ… Zero downtime deployments
- âœ… ~$2/month cost

### If You Just Want It Working NOW:

```bash
./deploy.sh
```

Will prompt for everything during deployment!

---

**Ready?**
```bash
cd /Users/jonan/src/claudebox/omni-agent
./setup.sh
```
