SIZE=$(wc -c < cloudflare-worker/src/index.js)
echo "Built worker size: $SIZE bytes"
if [ $SIZE -lt 40000 ]; then
  echo "ERROR: Built worker is too small (expected >40KB with embedded HTML)"
  exit 1
fi

if ! grep -q "<!DOCTYPE html>" cloudflare-worker/src/index.js; then
  echo "ERROR: Built worker does not contain embedded HTML"
  exit 1
fi

echo "âœ“ Build verification passed"